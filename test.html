<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>í¼ìŠ¤ë„ ìŠ¤í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="test.css" />
</head>
<body>
  <!-- ì „ì²´ í™”ë©´ì„ ì±„ìš°ëŠ” ì»¨í…Œì´ë„ˆ -->
  <div class="stage">
    <!-- ì‹¤ì œ ë””ìì¸ í”„ë ˆì„ (ê¸°ì¤€ ì‚¬ì´ì¦ˆ 564Ã—900) -->
    <div class="frame">
      <div class="canvas">
        <!-- í—¤ë” -->
        <header class="header">
          <div class="brand">Keepod</div>
        </header>

        <!-- ì§„í–‰ ë°” -->
        <div class="divider">
          <div class="fill" id="progressFill"></div>
        </div>

        <!-- ì§„í–‰ë„ í…ìŠ¤íŠ¸ -->
        <div class="progress" id="progressText">1 / 20</div>

        <!-- ì•ˆë‚´ ë¬¸êµ¬ (í•„ìš”í•œ ì§ˆë¬¸ì—ì„œë§Œ JSë¡œ show/hide) -->
        <p class="hint" id="hint">
          [ìì‹ ì´ í¼ìŠ¤ë„ ìŠ¤í˜ì´ìŠ¤ ì¹¨ë²”ì„ ë‹¹í–ˆì„ ë•Œì˜ ìƒí™©ì„ ìƒê°í•˜ë©° ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”]
        </p>

        <!-- ì§ˆë¬¸ ì¹´ë“œ -->
        <section class="question-card">
          <p class="question" id="questionText"></p>
        </section>

        <!-- 5ì  ì²™ë„ -->
        <div class="scale">
          <div class="rail"></div>

          <button class="dot" data-value="1"></button>
          <button class="dot" data-value="2"></button>
          <button class="dot" data-value="3"></button>
          <button class="dot" data-value="4"></button>
          <button class="dot" data-value="5"></button>

          <div class="labels">
            <span>ê·¸ë ‡ì§€ ì•Šë‹¤</span>
            <span>ë³´í†µì´ë‹¤</span>
            <span>ê·¸ë ‡ë‹¤</span>
          </div>
        </div>

        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div class="cta-wrap">
          <button class="next" id="nextBtn" disabled>ë‹¤ìŒ</button>
          <button class="back" id="backBtn">
            <span class="chev">â€¹</span> ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ê¸°
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- âœ… ì—¬ê¸°ì—ëŠ” ê¸°ì¡´ì— ì“°ë˜ ì§ˆë¬¸/ì €ì¥/ë¡œì§ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ë¶™ì—¬ ë„£ìœ¼ë©´ ë¼ìš” -->

        <!-- ===================== ì§ˆë¬¸ ë° í…ŒìŠ¤íŠ¸ ë¡œì§ ====================== -->
        <script>
          const QUESTIONS = [
            "ëŠ¦ì€ ë°¤ì´ë‚˜ íœ´ì¼ì— íƒ€ì¸ì—ê²Œ ì—°ë½ì´ ì˜¤ë©´ ë¶ˆì¾Œí•˜ë‹¤",
            "SNSì—ì„œ ë™ì˜ ì—†ì´ ë‚˜ë¥¼ íƒœê·¸í•˜ê±°ë‚˜, ë‚´ê°€ í¬í•¨ëœ ì‚¬ì§„ì„ ê²Œì‹œí•˜ë©´ ë¶ˆì¾Œí•˜ë‹¤.",
            "SNS ê²Œì‹œë¬¼ì„ ì£¼ë¡œ íŠ¹ì • ì‚¬ëŒë§Œ ë³¼ ìˆ˜ ìˆê²Œ ì„¤ì •í•œë‹¤",
            "ìƒëŒ€ê°€ ì§€ë‚˜ì¹˜ê²Œ ìì£¼ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê±°ë‚˜ ë‹µì¥ì„ ì¬ì´‰í•˜ë©´ ë¶ˆí¸í•˜ë‹¤",
            "ì¹œë¶„ê³¼ ê´€ê³„ì—†ì´ ê°€ë²¼ìš´ ì‹ ì²´ì ‘ì´‰ (ì•…ìˆ˜, í•˜ì´íŒŒì´ë¸Œ ë“±)ì„ í”¼í•œë‹¤",
            "ì‰¬ëŠ” ë‚  í™œê¸°ì°¬ ê³³ë³´ë‹¤ ì¡°ìš©í•œ ì¥ì†Œë¥¼ ì„ í˜¸í•œë‹¤",
            "ê³µê³µì¥ì†Œì—ì„œ ëˆ„êµ°ê°€ ê°€ê¹Œì´ ì•‰ìœ¼ë©´ í‰ì†Œì²˜ëŸ¼ í–‰ë™í•˜ê¸° ì–´ë µë‹¤",
            "ì—˜ë¦¬ë² ì´í„°ì—ì„œ ì£¼ë¡œ ê³„ê¸°íŒ ê·¼ì²˜ì— íƒ„ë‹¤",
            "íƒ€ì¸ì—ê²Œ ê°œì¸ì ì¸ ì§ˆë¬¸ì„ ë°›ìœ¼ë©´ ë‹µí•˜ê¸° êº¼ë ¤ì§„ë‹¤",
            "ê°™ì€ ë§ì´ë¼ë„ ìƒëŒ€ì˜ ì–´íˆ¬ì— ë”°ë¼ ê¸°ë¶„ì´ ë‹¬ë¼ì§„ë‹¤",
            "â€œë„ˆ ì™œ ê³µê°ì„ ì•ˆí•´ì¤˜?â€ ì²˜ëŸ¼ ê°ì •ì„ ê°•ìš”ë‹¹í•˜ë©´ ë¶€ë‹´ëœë‹¤",
            "ìƒëŒ€ê°€ ë„ˆë¬´ ë¹ ë¥´ê²Œ ë§í•˜ê±°ë‚˜ ì¹¨ë¬µì´ ê¸¸ì–´ì§€ë©´ ì••ë°•ê°ì„ ëŠë‚€ë‹¤",
            "ì§ì¥ì—ì„œ ì‚¬ëŒë“¤ê³¼ ì¼í•œ ë’¤, ì¹œêµ¬ë¥¼ ë§Œë‚˜ê¸°ë³´ë‹¤ í˜¼ì ì‰¬ê³ ì‹¶ë‹¤",
            "ì‚¬ëŒì´ ë§ê±°ë‚˜ ë¶ˆí¸í•œ ë§ì„ ë“¤ìœ¼ë©´ ì‹¬ì¥ì´ ë‘ê·¼ê±°ë¦°ë‹¤",
            "ì‚¬ëŒì´ ë§ì€ ê³³ì—ì„œ í‰ì†Œë³´ë‹¤ ì§œì¦ì´ë‚˜ í™”ê°€ ìì£¼ ë‚œë‹¤",
            "ëˆ„êµ°ê°€ì™€ ë¶€ë”ªíˆê±°ë‚˜ ë¶ˆí¸í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ë©´ ë¬´ê¸°ë ¥í•´ì§„ë‹¤.",
            "ì—¬ëŸ¿ì´ ìˆëŠ” ë…ì„œì‹¤ë³´ë‹¤ ì§‘ì—ì„œ í˜¼ì í•  ë•Œ ì¼ì´ ë” ì˜ëœë‹¤",
            "ë„ˆë¬´ í”¼ê³¤í•œ ë‚ ì—” ë§Œì› ë²„ìŠ¤ì—ì„œ ìë¦¬ë¥¼ ì–‘ë³´í•˜ì§€ ì•ŠëŠ”ë‹¤",
            "ë¶ˆí¸í•¨ì„ í‘œí˜„í•´ë„ ë°”ë€Œì§€ ì•Šìœ¼ë©´ ê·¸ëƒ¥ ì°¸ëŠ”ë‹¤",
            "íƒ€ì¸ê³¼ ë„ˆë¬´ ê°€ê¹Œì´ ìˆìœ¼ë©´ í˜¸í¡ì´ ì–´ë µê³  ëª¸ì´ ê¸´ì¥ëœë‹¤"
          ];
    
          const dots = Array.from(document.querySelectorAll('.dot'));
          const nextBtn = document.querySelector('.next');
          const backBtn = document.querySelector('.back');
          const qEl = document.querySelector('.question');
          const progEl = document.querySelector('.progress');
          const fillEl = document.querySelector('.fill');
          const hintEl = document.querySelector('.hint');
    
          let index = 0;
          let selectedDot = null;
          let answers = Array(20).fill(null);
    
          function resetAll() {
            answers = Array(20).fill(null);
            selectedDot = null;
            index = 0;
            fillEl.style.width = '0%';
            nextBtn.disabled = true;
            nextBtn.style.background = '#E4E4E4';
            dots.forEach(d => d.classList.remove('active'));
            localStorage.removeItem('keepod_answers');
          }
    
          function renderQuestion(i) {
            qEl.innerHTML = QUESTIONS[i];
            progEl.textContent = `${i + 1} / 20`;
    
            hintEl.style.display = i >= 12 ? "block" : "none";
    
            fillEl.style.width = `${(i / 20) * 100}%`;
    
            dots.forEach(d => d.classList.remove('active'));
            selectedDot = null;
            if (answers[i] !== null) {
              const found = dots.find(d => Number(d.dataset.value) === answers[i]);
              if (found) {
                found.classList.add('active');
                selectedDot = found;
                nextBtn.disabled = false;
                nextBtn.style.background = '#7CEA54';
              }
            } else {
              nextBtn.disabled = true;
              nextBtn.style.background = '#E4E4E4';
            }
    
            backBtn.innerHTML = (i === 0)
              ? "ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°"
              : '<span class="chev">â€¹</span> ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ê¸°';
          }
    
          function applySelection(dot) {
            dots.forEach(d => d.classList.remove('active'));
            dot.classList.add('active');
            selectedDot = dot;
            nextBtn.disabled = false;
            nextBtn.style.background = '#7CEA54';
            answers[index] = Number(dot.dataset.value);
            fillEl.style.width = `${((index + 1) / 20) * 100}%`;
          }
    
          renderQuestion(index);
    
          dots.forEach(dot => {
            dot.addEventListener('click', () => {
              if (selectedDot === dot) {
                dot.classList.remove('active');
                selectedDot = null;
                answers[index] = null;
                nextBtn.disabled = true;
                nextBtn.style.background = '#E4E4E4';
                fillEl.style.width = `${(index / 20) * 100}%`;
                return;
              }
              applySelection(dot);
            });
          });
    
          nextBtn.addEventListener('click', () => {
            if (!selectedDot) return;
            if (index < 19) {
              index++;
              renderQuestion(index);
            } else {
              localStorage.setItem('keepod_answers', JSON.stringify(answers));
              location.href = "result.html";
            }
          });
    
          backBtn.addEventListener('click', () => {
            if (index === 0) {
              resetAll();
              location.href = "index.html";
            } else {
              index--;
              renderQuestion(index);
            }
          });
        </script>
    
    
        <!-- ===================== ê°¤íƒ­ S5e ì „ì²´í™”ë©´ ìŠ¤ì¼€ì¼ ====================== -->
        <script>
          (function () {
            const BASE_W = 564;
            const BASE_H = 900;
            const frame =
              document.querySelector(".frame") || document.getElementById("frame");
    
            function ensureWrappers() {
              if (!frame) return {};
              if (
                frame.parentElement &&
                frame.parentElement.classList.contains("scaled")
              ) {
                return {
                  stage: frame.parentElement.parentElement,
                  scaled: frame.parentElement,
                };
              }
              const scaled = document.createElement("div");
              scaled.className = "scaled";
              const stage = document.createElement("div");
              stage.className = "stage";
              frame.parentElement.insertBefore(stage, frame);
              stage.appendChild(scaled);
              scaled.appendChild(frame);
              return { stage, scaled };
            }
    
            const { stage, scaled } = ensureWrappers();
    
            function vp() {
              const vw = window.visualViewport?.width || window.innerWidth;
              const vh = window.visualViewport?.height || window.innerHeight;
              return { vw, vh };
            }
    
            function apply() {
              const { vw, vh } = vp();
    
              const s = vh / BASE_H;
              const outW = BASE_W * s;
              const outH = BASE_H * s;
    
              const tx = (vw - outW) / 2;
              const ty = 0;
    
              Object.assign(stage.style, {
                position: "fixed",
                inset: "0",
                overflow: "hidden",
              });
    
              Object.assign(scaled.style, {
                position: "absolute",
                left: `${tx}px`,
                top: `${ty}px`,
                width: `${outW}px`,
                height: `${outH}px`,
                margin: "0",
              });
    
              Object.assign(frame.style, {
                position: "absolute",
                left: "0",
                top: "0",
                width: `${BASE_W}px`,
                height: `${BASE_H}px`,
                transformOrigin: "top left",
                transform: `scale(${s})`,
              });
            }
    
            window.addEventListener("resize", apply);
            window.addEventListener("orientationchange", apply);
            apply();
          })();
        </script>

  <!-- ğŸ” í™”ë©´ í¬ê¸°ì— ë§ì¶° í”„ë ˆì„ì„ í™•ëŒ€/ì¶•ì†Œí•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    function resizeFrame() {
      const baseW = 564;  // ë””ìì¸ ê¸°ì¤€ ê°€ë¡œ
      const baseH = 900;  // ë””ìì¸ ê¸°ì¤€ ì„¸ë¡œ

      const vw = window.innerWidth;
      const vh = window.innerHeight;

      const scale = Math.min(vw / baseW, vh / baseH);
      const frame = document.querySelector('.frame');

      if (frame) {
        frame.style.transform = `scale(${scale})`;
      }
    }

    window.addEventListener('load', resizeFrame);
    window.addEventListener('resize', resizeFrame);
  </script>
</body>
</html>
