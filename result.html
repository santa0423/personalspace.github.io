<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>결과 보기</title>
  <link rel="stylesheet" href="result.css" />
</head>
<body>
  <div class="page">
    <div class="stage" id="stage">
      <div class="frame-box" id="frameBox">
        <!-- 섹션 1 : 초록 박스 (메인 비주얼) -->
        <div class="overlay-box section" id="section-1">
          <!-- 상단: 이름 + 레전드 -->
          <div class="overlay-top-row">
            <!-- 말풍선 이름 박스 -->
            <div class="name-bubble">
              <div class="name-ko">보더</div>
              <div class="name-en">(Border)</div>
            </div>

            <!-- 평균 / 나 레전드 -->
            <div class="legend">
              <div class="legend-item">
                <span class="legend-dot legend-dot-average"></span>
                <span>평균</span>
              </div>
              <div class="legend-item">
                <span class="legend-dot legend-dot-me"></span>
                <span>나</span>
              </div>
            </div>
          </div>

          <div class="character-area">
            <div class="ellipse">
              <!-- 👉 내 점수용 원 -->
              <div class="ellipse-me"></div>
            </div>
            <img src="images/보더.png"
                 alt="보더 캐릭터"
                 class="character-img" />
          </div>
          

          <!-- 타원 아래 흰색 네모 섹션 2개 -->
          <div class="summary-row">
            <!-- 왼쪽: 점수 카드 -->
            <div class="score-card">
              <div class="score-main">
                <span class="score-number">100</span>
                <span class="score-unit">점</span>
              </div>
              <div class="score-sub">▲ 평균보다 50점 높아요.</div>
              <div class="score-desc">* 점수가 높을수록 팟 침범에 민감한 편이에요.</div>
            </div>

            <!-- 오른쪽: 타입 설명 카드 -->
            <div class="type-card">
              <div class="type-title">거리수호형 팟</div>
              <p class="type-text">
                당신은 넓은 개인 공간이 필요하며, 타인과의 거리가 가까워지면 불편함을 크게 느끼는 편이에요.
                또한, 모든 영역에서 명확한 경계가 필요해요. 터치존, 마인드존, 디지털존 침범 모두에 예민하게 반응해요.
              </p>
            </div>
          </div>
        </div>

        <!-- 섹션 2~6 : 아래 노란/분홍 박스 -->
        <div class="yellow-container">
          <!-- 왼쪽: 노란 3박스 -->
          <div class="left-column">
            <!-- 1번 노란 박스: 터치존 -->
            <div class="yellow-box section" id="section-2">
              <div class="zone-header">각 영역별 나의 팟은?</div>

              <div class="zone-content">
                <!-- 왼쪽 설명 -->
                <div class="zone-left">
                  <div class="zone-title">터치존</div>
                  <div class="zone-bubble">
                    주변에 사람들이나 자극이 많아 처리할 정보량이 넘치면 불편함을 느껴요.
                  </div>
                </div>
              
                <!-- 오른쪽: 4개 요인 바 그래프 -->
                <div class="zone-right">
                  <div class="zone-item" data-touch-key="친분">
                    <span class="zone-label">친분</span>
                    <div class="zone-bars">
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                    </div>
                  </div>
              
                  <div class="zone-item" data-touch-key="정보과잉">
                    <span class="zone-label">정보과잉</span>
                    <div class="zone-bars">
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                    </div>
                  </div>
              
                  <div class="zone-item" data-touch-key="행동제약">
                    <span class="zone-label">행동제약</span>
                    <div class="zone-bars">
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                    </div>
                  </div>
              
                  <div class="zone-item" data-touch-key="통제력">
                    <span class="zone-label">통제력</span>
                    <div class="zone-bars">
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                      <div class="bar"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 2번 노란 박스: 마인드존 -->
            <div class="yellow-box section" id="section-3">
              <div class="zone2-content">
                <!-- 왼쪽: 동그라미 4개 -->
                <div class="zone2-left">
                  <div class="zone2-circle circle-privacy" data-mind-key="사생활">사생활</div>
                  <div class="zone2-circle circle-emotion" data-mind-key="감정개입">감정개입</div>
                  <div class="zone2-circle circle-nonverbal" data-mind-key="비언어">비언어</div>
                  <div class="zone2-circle circle-tone" data-mind-key="어투">어투</div>
                </div>
            
                <!-- 오른쪽: 설명 -->
                <div class="zone2-right">
                  <div class="zone2-title">마인드존</div>
                  <div class="zone2-bubble">
                    시선, 표정, 분위기 등 말하지 않아도 전달되는 압박에
                    불편함을 느껴요.
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 3번 노란 박스: 디지털존 -->
            <div class="yellow-box section" id="section-4">
              <div class="zone3-content">
                <!-- 왼쪽: 설명 -->
                <div class="zone3-left">
                  <div class="zone3-title">디지털존</div>
                  <div class="zone3-bubble">
                    알림, 메시지, 온라인 연결 등에서 오는 디지털 압박에
                    민감하게 반응하는 편이에요.
                  </div>
                </div>

                <!-- 오른쪽: 세로 막대 그래프 -->
                <div class="zone3-right">
                  <div class="zone3-bar-group" data-digital-key="연락">
                    <div class="zone3-vert-bar">
                      <div class="zone3-vert-fill"></div>
                    </div>
                    <div class="zone3-bar-label">연락</div>
                  </div>

                  <div class="zone3-bar-group" data-digital-key="노출">
                    <div class="zone3-vert-bar">
                      <div class="zone3-vert-fill"></div>
                    </div>
                    <div class="zone3-bar-label">노출</div>
                  </div>

                  <div class="zone3-bar-group" data-digital-key="알림">
                    <div class="zone3-vert-bar">
                      <div class="zone3-vert-fill"></div>
                    </div>
                    <div class="zone3-bar-label">알림</div>
                  </div>

                  <div class="zone3-bar-group" data-digital-key="속도">
                    <div class="zone3-vert-bar">
                      <div class="zone3-vert-fill"></div>
                    </div>
                    <div class="zone3-bar-label">속도</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 오른쪽: 분홍 2박스 -->
          <div class="right-column">

            <!-- 분홍 박스 1 : 네모 8개 배치 -->
            <div class="pink-box section" id="section-5">
              <div class="pink-header">침범 후 나의 반응은?</div>

              <div class="pink-box-grid">
                <div class="pink-cell" data-reaction-key="사교성 저하">사교성<br>저하</div>
                <div class="pink-cell" data-reaction-key="생리적 반응">생리적<br>반응</div>
                <div class="pink-cell" data-reaction-key="공격성 증가">공격성<br>증가</div>
                <div class="pink-cell" data-reaction-key="우울">우울</div>
                <div class="pink-cell" data-reaction-key="과업 수행 저하">과업 수행 저하</div>
                <div class="pink-cell" data-reaction-key="이타 행동 감소">이타 행동 감소</div>
                <div class="pink-cell" data-reaction-key="불안">불안</div>
                <div class="pink-cell" data-reaction-key="학습된 무기력">학습된<br>무기력</div>
              </div>
            </div>

            <!-- 분홍 박스 2 : 큰 말풍선 3줄 (상위 3개 반응 설명) -->
            <div class="pink-box section" id="section-6">
              <div class="pink-item">
                <div class="pink-item-label">사교성 저하</div>
                <div class="pink-item-desc">
                  침범 경험으로 대인관계가 부담스러워져 약속을 피하거나, 만나도 깊은 관계 형성을 회피하게 돼요.
                </div>
              </div>
              
              <div class="pink-item">
                <div class="pink-item-label">과업 수행 저하</div>
                <div class="pink-item-desc">
                  침범 경험이 에너지를 소진시켜 업무나 학업에 집중하기 어렵고, 평소보다 능률이 크게 떨어져요.
                </div>
              </div>
              
              <div class="pink-item">
                <div class="pink-item-label">학습된 무기력</div>
                <div class="pink-item-desc">
                  반복된 침범으로 대응의 효과를 느끼지 못해 “어차피 소용없어”라며 경계 세우기 자체를 포기하게 돼요.
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 배경 이미지 (테스트지 전체 배경) -->
        <div class="frame">
          <img src="images/테스트지 수정.png" alt="테스트 결과" crossorigin="anonymous" />
        </div>

      </div>
    </div>

    <div class="footer">
      <div class="btn-wrap">
        <button class="btn" id="actionBtn">처음으로 돌아가기</button>
        <button class="btn btn-print" id="printBtn">인쇄하기</button>
      </div>
    </div>
    

  <script>
    const W = 560, H = 790, FOOT = 96;
    const frameBox = document.getElementById('frameBox');
    const actionBtn = document.getElementById('actionBtn');

    /* =========================
       0. 공통 유틸
       ========================= */
    function loadAnswers() {
      try {
        const raw = localStorage.getItem('keepod_answers');
        if (!raw) return null;
        const arr = JSON.parse(raw);
        if (!Array.isArray(arr) || arr.length !== 20) return null;
        return arr.map(v => Number(v) || 0);
      } catch (e) {
        console.error('답안 로딩 오류', e);
        return null;
      }
    }

    function sumByIndex(answers, indices) {
      return indices.reduce((sum, i) => sum + (answers[i] || 0), 0);
    }

    /* =========================
       1. 질문 → 영역 매핑
       ========================= */
    const QUESTION_ZONE_MAP = {
      touch: {
        "친분":     [4, 6, 19],
        "정보과잉": [5, 12, 16],
        "행동제약": [6, 7, 17],
        "통제력":   [7, 17, 18]
      },
      mind: {
        "사생활":  [8, 2],
        "감정개입":[10, 18],
        "비언어":  [11, 13],
        "어투":    [9, 14]
      },
      digital: {
        "연락": [0, 3, 11],
        "노출": [1, 2],
        "알림": [3, 9],
        "속도": [3, 11]
      }
    };

    /* =========================
       2. 반응 유형 매핑
       ========================= */
    const REACTION_QUESTION_MAP = {
      "사교성 저하":   [4, 8, 12],
      "생리적 반응":   [6, 13, 19],
      "공격성 증가":   [3, 9, 14],
      "우울":         [10, 15],
      "과업 수행 저하":[5, 16],
      "이타 행동 감소":[17],
      "불안":         [0, 1, 7, 11],
      "학습된 무기력":[18]
    };

    const REACTION_TEXT = {
      "사교성 저하": "침범 경험으로 대인관계가 부담스러워져 약속을 피하거나, 만나도 깊은 관계 형성을 회피하게 돼요.",
      "생리적 반응": "심장이 두근거리거나 호흡이 가빠지는 등 몸이 먼저 반응하여, 머리로는 괜찮다고 생각해도 쉽게 긴장이 풀리지 않아요.",
      "공격성 증가": "불편함이 쌓이면 짜증이나 분노로 터져 나오기 쉽고, 사소한 자극에도 예민하게 반응하게 돼요.",
      "우울": "에너지가 급격히 떨어지고 의욕이 사라져, 평소에 즐기던 활동도 부담스럽게 느껴질 수 있어요.",
      "과업 수행 저하": "침범 경험이 에너지를 소진시켜 업무나 학업에 집중하기 어렵고, 평소보다 능률이 크게 떨어져요.",
      "이타 행동 감소": "나 스스로도 지치다 보니, 타인을 위해 배려하거나 양보하는 행동이 점점 줄어들 수 있어요.",
      "불안": "언제 또 침범이 일어날지 모른다는 생각에 긴장이 유지되고, 상황을 지나치게 예측하거나 걱정하게 돼요.",
      "학습된 무기력": "반복된 침범으로 대응의 효과를 느끼지 못해 “어차피 소용없어”라며 경계 세우기 자체를 포기하게 돼요."
    };

    /* =========================
       3. 점수 계산
       ========================= */
    function calcZoneScores(answers) {
      const result = {
        touch:   { total: 0, sub: {} },
        mind:    { total: 0, sub: {} },
        digital: { total: 0, sub: {} }
      };

      for (const [zoneKey, subMap] of Object.entries(QUESTION_ZONE_MAP)) {
        let zoneTotal = 0;
        const subScores = {};
        for (const [subKey, indices] of Object.entries(subMap)) {
          const s = sumByIndex(answers, indices);
          subScores[subKey] = { score: s, max: indices.length * 5 };
          zoneTotal += s;
        }
        result[zoneKey].total = zoneTotal;
        result[zoneKey].sub = subScores;
      }
      return result;
    }

    function calcReactionScores(answers) {
      const arr = [];
      for (const [key, indices] of Object.entries(REACTION_QUESTION_MAP)) {
        const score = sumByIndex(answers, indices);
        const max = indices.length * 5;
        arr.push({ key, label: key, score, max });
      }
      arr.sort((a, b) => b.score - a.score);
      return arr;
    }

    function calcTotalScore(answers) {
      const sum = answers.reduce((s, v) => s + (v || 0), 0);
      const max = answers.length * 5;
      if (!max) return 0;
      return Math.round((sum / max) * 100);
    }

    /* =========================
       4. 패턴/타입
       ========================= */
    function findPattern(zoneScores) {
      const entries = [
        { key: 'touch',   score: zoneScores.touch.total },
        { key: 'mind',    score: zoneScores.mind.total },
        { key: 'digital', score: zoneScores.digital.total },
      ];

      const max = Math.max(...entries.map(e => e.score));
      const tops = entries.filter(e => e.score === max).map(e => e.key);

      const priority = ['touch', 'mind', 'digital'];
      const topsSorted = [...tops].sort(
        (a, b) => priority.indexOf(a) - priority.indexOf(b)
      );

      const mainZone = priority.find(z => tops.includes(z)) || tops[0];
      const patternKey = topsSorted.length > 0 ? topsSorted.join('+') : mainZone;

      return { tops, patternKey, mainZone };
    }

    const SCORE_LEVEL_TEXT = {
      high: "당신은 넓은 개인 공간이 필요하며, 타인과의 거리가 가까워지면 불편함을 크게 느끼는 편이에요.",
      mid:  "당신은 상황에 따라 필요한 거리가 달라지며, 적절한 경계를 유연하게 조절할 수 있어요.",
      low:  "당신은 가까운 거리에서도 편안하지만, 특정 상황에서는 경계가 필요한 편이에요."
    };

    const TYPE_TEXT = {
      "touch": {
        title: "거리수호형 팟",
        area:  "또한, 터치존에 민감해요. 누군가 가까이 다가오거나 신체 접촉이 일어날 때 불편함을 느껴요."
      },
      "mind": {
        title: "감정방어형 팟",
        area:  "또한 마인드존에 민감해요. 불편한 질문이나 어투, 시선 등으로 정서적 침범을 느낄 때가 많아요."
      },
      "digital": {
        title: "디지털과부하형 팟",
        area:  "또한 디지털존에 민감해요. 메시지, 알림 등 과도한 온라인 연결 요구에 부담을 느껴요."
      },
      "touch+mind": {
        title: "현실보호형 팟",
        area:  "또한 오프라인 상호작용 전반에서 경계가 필요해요. 터치존과 마인드존 모두에서 침범을 쉽게 감지해요."
      },
      "mind+digital": {
        title: "심리수호형 팟",
        area:  "또한 오프라인과 온라인의 침범에 민감해요. 마인드존과 디지털존 모두에서 부담을 크게 느껴요."
      },
      "touch+digital": {
        title: "공간·디지털 수호형 팟",
        area:  "또한 사람이 많은 공간과 디지털 알림 모두에 쉽게 피로해져요. 물리적 공간과 디지털 환경 모두에 여백이 필요해요."
      },
      "touch+mind+digital": {
        title: "완벽수호형 팟",
        area:  "또한 모든 영역에서 경계가 필요해요. 터치존, 마인드존, 디지털존 침범 모두에 예민하게 반응해요."
      }
    };

    /* =========================
       4-0. 점수에 따라 타원 크기 조절
       ========================= */
       function updateEllipseByScore(totalScore) {
  const ellipseMe = document.querySelector('.ellipse-me'); // ✅ 바뀐 부분
  if (!ellipseMe) return;

  const clamped = Math.min(100, Math.max(0, totalScore || 0));
  const t = clamped / 100;

  // 점수 차이 더 세게 주고 싶으면 숫자 키우면 됨
  const scale = 0.5 + 1.2 * t; // 예: 0점=0.5배, 100점=1.7배

  ellipseMe.style.transform = `scale(${scale})`;
}


    function getScoreLevel(totalScore) {
      if (totalScore >= 75) return 'high';
      if (totalScore >= 47) return 'mid';
      return 'low';
    }

    function updateSummaryCard(totalScore, zoneScores, patternKey) {
      const numEl  = document.querySelector('.score-number');
      const subEl  = document.querySelector('.score-sub');
      const typeEl = document.querySelector('.type-title');
      const descEl = document.querySelector('.type-text');

      if (numEl) numEl.textContent = totalScore.toString();

      const avg = 60;
      const diff = totalScore - avg;
      if (subEl) {
        if (diff > 3) {
          subEl.textContent = `▲ 평균보다 ${Math.abs(diff)}점 높아요.`;
        } else if (diff < -3) {
          subEl.textContent = `▼ 평균보다 ${Math.abs(diff)}점 낮아요.`;
        } else {
          subEl.textContent = `■ 평균과 비슷한 수준이에요.`;
        }
      }

      const typeInfo = TYPE_TEXT[patternKey] || TYPE_TEXT["touch"];
      if (typeEl) typeEl.textContent = typeInfo.title;

      const levelKey = getScoreLevel(totalScore);
      const scoreSentence = SCORE_LEVEL_TEXT[levelKey];
      const areaSentence  = typeInfo.area;

      if (descEl) {
        descEl.textContent = `${scoreSentence} ${areaSentence}`;
      }

      // ✅ 점수에 맞춰 타원 크기 조절
      updateEllipseByScore(totalScore);
    }

    /* =========================
       4-1. 캐릭터 존 결정
       ========================= */
    function decideZoneForCharacter(answers) {
      let digital = 0, touch = 0, mind = 0;
      answers.forEach((v, i) => {
        if (i >= 0 && i <= 3) digital += v;
        else if (i >= 4 && i <= 7) touch += v;
        else if (i >= 8 && i <= 11) mind += v;
      });

      let best = 'touch';
      let bestScore = touch;

      if (mind > bestScore) {
        best = 'mind';
        bestScore = mind;
      }
      if (digital > bestScore) {
        best = 'digital';
        bestScore = digital;
      }
      return best;
    }

    function updateCharacter(zone) {
      const imgEl  = document.querySelector('.character-img');
      const nameKo = document.querySelector('.name-ko');
      const nameEn = document.querySelector('.name-en');
      if (!imgEl || !nameKo || !nameEn) return;

      if (zone === 'touch') {
        imgEl.src = 'images/보더.png';
        imgEl.alt = '보더 캐릭터';
        nameKo.textContent = '보더';
        nameEn.textContent = '(Border)';
      } else if (zone === 'mind') {
        imgEl.src = 'images/리스니.png';
        imgEl.alt = '리스니 캐릭터';
        nameKo.textContent = '리스니';
        nameEn.textContent = '(Lisni)';
      } else if (zone === 'digital') {
        imgEl.src = 'images/네티.png';
        imgEl.alt = '네티 캐릭터';
        nameKo.textContent = '네티';
        nameEn.textContent = '(Neti)';
      }
    }

    /* =========================
       5. 영역별 그래픽
       ========================= */
    function updateTouchBars(subScores) {
      const items = document.querySelectorAll('#section-2 .zone-item');
      items.forEach(item => {
        const key = item.getAttribute('data-touch-key');
        const info = subScores[key];
        if (!info) return;
        const ratio = info.max ? info.score / info.max : 0;
        const fillCount = Math.round(ratio * 5);
        const bars = item.querySelectorAll('.bar');
        bars.forEach((bar, idx) => {
          bar.classList.remove('filled', 'empty');
          if (idx < fillCount) bar.classList.add('filled');
          else bar.classList.add('empty');
        });
      });
    }

    function updateMindCircles(subScores) {
      const circles = document.querySelectorAll('#section-3 .zone2-circle');
      if (!circles.length) return;

      let maxRatio = 0;
      circles.forEach(c => {
        const key = c.getAttribute('data-mind-key');
        const info = subScores[key];
        if (!info || !info.max) return;
        const ratio = info.score / info.max;
        if (ratio > maxRatio) maxRatio = ratio;
      });
      if (maxRatio === 0) maxRatio = 1;

      function lerp(a, b, t) {
        return Math.round(a + (b - a) * t);
      }

      const MIN_COLOR = { r: 244, g: 247, b: 207 };
      const MAX_COLOR = { r: 150, g: 189, b: 61 };

      circles.forEach(c => {
        const key = c.getAttribute('data-mind-key');
        const info = subScores[key];
        if (!info || !info.max) return;

        const ratioRaw = info.score / info.max;
        const ratio = ratioRaw / maxRatio;

        const level = Math.max(1, Math.round(ratio * 5));
        const t = (level - 1) / 4;

        const minSize = 20;
        const maxSize = 68;
        const size = minSize + (maxSize - minSize) * t;
        c.style.width = `${size}px`;
        c.style.height = `${size}px`;

        const r = lerp(MIN_COLOR.r, MAX_COLOR.r, t);
        const g = lerp(MIN_COLOR.g, MAX_COLOR.g, t);
        const b = lerp(MIN_COLOR.b, MAX_COLOR.b, t);
        c.style.background = `rgb(${r}, ${g}, ${b})`;
      });
    }

    function updateDigitalBars(subScores) {
      const groups = document.querySelectorAll('#section-4 .zone3-bar-group');
      groups.forEach(g => {
        const key = g.getAttribute('data-digital-key');
        const info = subScores[key];
        if (!info) return;
        const ratio = info.max ? info.score / info.max : 0;
        const h = 20 + ratio * 60;
        const fill = g.querySelector('.zone3-vert-fill');
        if (fill) {
          fill.style.height = h + '%';
        }
      });
    }

    /* =========================
       6. 반응 박스
       ========================= */
    function highlightReactionGrid(top3) {
      const cells = document.querySelectorAll('.pink-box-grid .pink-cell');
      const topKeys = top3.map(item => item.key);

      cells.forEach(cell => {
        const key = cell.getAttribute('data-reaction-key');
        if (topKeys.includes(key)) {
          cell.classList.add('active');
        } else {
          cell.classList.remove('active');
        }
      });
    }

    function updateReactionDetails(top3) {
      const items = document.querySelectorAll('#section-6 .pink-item');

      items.forEach((item, idx) => {
        const labelEl = item.querySelector('.pink-item-label');
        const descEl  = item.querySelector('.pink-item-desc');
        const data = top3[idx];

        if (!data) {
          labelEl.textContent = '-';
          descEl.textContent  = '해당 반응은 상대적으로 덜 나타나는 편이에요.';
          return;
        }

        labelEl.textContent = data.label;
        descEl.textContent  = REACTION_TEXT[data.key];
      });
    }

    /* =========================
       7. 결과 초기화
       ========================= */
    function initResults() {
      const answers = loadAnswers();
      if (!answers) {
        console.warn('답안을 찾을 수 없어 기본 값으로 표시합니다.');
        return;
      }

      const zoneScores     = calcZoneScores(answers);
      const reactionScores = calcReactionScores(answers);
      const totalScore     = calcTotalScore(answers);
      const { patternKey } = findPattern(zoneScores);

      updateSummaryCard(totalScore, zoneScores, patternKey);

      const charZone = decideZoneForCharacter(answers);
      updateCharacter(charZone);

      updateTouchBars(zoneScores.touch.sub);
      updateMindCircles(zoneScores.mind.sub);
      updateDigitalBars(zoneScores.digital.sub);

      const top3 = reactionScores.slice(0, 3);
      highlightReactionGrid(top3);
      updateReactionDetails(top3);
    }

    /* =========================
       8. 레이아웃 스케일
       ========================= */
    function scale() {
      const vw = (window.visualViewport && window.visualViewport.width) || window.innerWidth;
      const vh = (window.visualViewport && window.visualViewport.height) || window.innerHeight;
      const usableH = Math.max(100, vh - FOOT);
      const s = Math.min(vw / W, usableH / H);
      // transform 스케일은 현재 사용 안 함
    }

    /* =========================
       9. 버튼
       ========================= */
    function initActionButton() {
      actionBtn.addEventListener('click', () => {
        localStorage.removeItem('keepod_answers');
        location.href = 'index.html';
      });
    }
    // 인쇄 버튼 동작
function initPrintButton() {
  const printBtn = document.getElementById('printBtn');
  if (!printBtn) return;

  printBtn.addEventListener('click', () => {
    window.print();
  });
}

    function init() {
      scale();
      initResults();
      initActionButton();
      initPrintButton();
    }

    window.addEventListener('resize', scale);
    window.addEventListener('orientationchange', scale);
    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
